<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    .bgimg {
      background-image: url('./res/bg.jpg');
      background-repeat:no-repeat;
      background-size:100%;
      height:666px;width:400px;
      margin: 0 auto;
    }
    div.playerchars_top {
      position: relative;
      left: 8%;
      top: 20%;
      /*border: 3px solid #73AD21;*/
    }
    div.playerchars_bottom {
      position: relative;
      left: 10%;
      top: 39%;
      /*border: 3px solid #73AD21;*/
    }
    body {
      /*margin-left: 10em;*/
      /*margin-right: 10em;*/
      margin: 10em;
    }
  </style>
  <meta charset="utf-8"/>
  <link rel="icon" href="res/favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="res/favicon.ico" type="image/x-icon" />

  <h1 style="text-align:center">Symmetric 'Guess Who?'</h1>
  <h3 style="text-align:center">Danny Rogaar<br>Jan Willem de Wit<br>Herman Groenbroek</h3>
  <br><br>
</header>

<body>

	<!-- THE INTERACTIVE GAME -->
	<div>
      <div class="bgimg">
          <div class="playerchars_top">
            <img id="p0_char1" src="./res/hg t1 cn.jpg" width="100" height="100">
            <img id="p0_char2" src="./res/hg t1 cn.jpg" width="100" height="100">
            <img id="p0_char3" src="./res/hg t1 cn.jpg" width="100" height="100">
          </div>

          <div class="playerchars_bottom">
            <img id="p1_char1" src="./res/hg t1 cn.jpg" width="100" height="100">
            <img id="p1_char2" src="./res/hg t1 cn.jpg" width="100" height="100">
            <img id="p1_char3" src="./res/hg t1 cn.jpg" width="100" height="100">
          </div>
      </div>
      <div style="text-align: center;">
        <button type="button" onclick="stepGame()">Next step</button>
        <button type="button" onclick="resetGame()">Reset game</button>
		<button type="button" onclick="help()">Help me</button>
      </div>
    </div>

  <script src="character.js"></script>
  <script src="player.js"></script>
  <script src="knowledge.js"></script>
  <script src="images.js"></script>
  <script src="kripkemodel.js"></script>
  <script src="main.js"></script>


	<!-- TODO: write about the following, in the report:

	* KB: disjunctions are not included since we decided to keep the KB and prover somewhat simplistic. Disjunctions are implicit in the sense that unknown propositions together are disjunctions (i.e. if we only know ''!hair:red', the implicit disjunction is 'hair:blue v hair:green' but this is not a concrete proposition in the KB)
	* KB: bob -> !lil_timmy is a step we deliberately did not implement, since the game is already over by that point (though we might want to )
	* ...

	-->


  <h2>The game</h2>

  <p>In the game of <i>Guess Who?</i>, two opposing players pick an avatar from a given set of characters. The characters that players can choose have various
  attributes such as their hair colour, or whether they are wearing glasses. It is up to the players to guess what character their opponent has chosen in order to win the game. Players may ask binary questions about the attributes in order to gain
  information on which avatar the opponent has chosen.</p>

  <p> The variant that is analysed here is a symmetric <i>Guess Who?</i>. Here, once a
    player asks a question about an attribute, both players have to say whether
    or not their character satisfies the mentioned attribute, truthfully.
    The implications of the symmetric gameplay is that players may be unable to
    ask direct questions when it would reveal which character they are playing
    themselves. Thus, as a player, you need to have information on what your
    opponent knows about your character. It may even help to know what your
    opponent thinks you are going to do next. <!-- TODO: citation needed (i.e. is this last sentence even true?) -->
  </p>


  <h2>Using epistemic logic</h2>

  <p>
    The game is analysed here using epistemic logic. We use the knowledge
    operator K to represent what knowledge is held by each player. A Kripke model in S5 is shown below. Each world consists of a pair of characters such that each player has chosen a character. Since each player knows what character they have, they know which characters they do not have. Therefore, e.g. player 1 can only access worlds where the character for player 1 is the same as the one he chose. This means that worlds have connections to each other world where the local state is preserved, much like the distributed systems used in chapt. 1.8, "Epistemic Logic for AI and Computer Science" by Meyer and van der Hoek (1995).
  </p>

  <!-- not centered yet -->
  <img id="model"  style="display: block; width:600px; height:450px; margin: 0 auto;" src="./res/kripkemodel.jpg">

  <p>
    The system shown above uses double lines to indicate that every state along that line can be reached from any other state reached. Notably, states along these lines can make 'jumps' to another state along the same line. Given that players know which attributes their character has, players may only access states in which this chosen character is the same. Thus, there is a horizontal and vertical double line for player one and two respectively, in order to access the reachable states.
    <br><br>
    We have indicated the propositions that are true in a world by showing the avatar for each player. The avatars, here, form a specification on propositions that are true and false by visualising the attributes of the characters, such as red hair and having two teeth. Then, the visualisation marks whether a given proposition is true or false.
  </p>

  <br>
  <h1 id="help"; style="text-align:center">Need help with the interactive game?</h1>

  <p>
	  At the top of the page you will find the interactive game of <i>Guess Who</i>. By pressing 'next step', the game advances by one step, i.e. one player asks a question and each players answers this question with regard to their chosen avatar. Both players' knowledge about their opponent's avatar will be updated, and the knowledge base tries to prove new propositions using the rules of the game. Note that pressing 'reset game' will reset all knowledge and chosen avatars. Pressing 'help me' should bring you to this section.
  </p>
  <br><br><br>

  <h1 style="text-align:center">Project implementation & status</h2>
  <p>
	  The game in its current state is not yet finished.
	  <br><br>
	  The game currently asks a random question (which might have been answered already). It keeps track of each agent's knowledge, a part of which can be seen by opening the browser's debugging console (on Chrome, right click -> inspect -> check the console tab) under 'Current Knowledge'. A custom logic prover is implemented which takes the rules of the game, as seen in the console, and proves new knowledge per agent once a question is answered. It seems only relevant that a player knows something about their opponent's avatar, and that a player knows that the opponent knows about their own avatar. To make the knowledge base more clear, only this is implemented as knowledge and not a player's knowledge about its own avatar (although it could be argued that this should be present for making a decision as to which question to ask the opponent, making sure that the opponent does not find out what your avatar is). The knowledge is represented as e.g. "K1(K2(p1.hair:red))", which means that "player 1 knows that player 2 knows that the avatar of player 1 has red hair". The goal of the game is to ask questions such that a piece of knowledge will be proven that looks like "K1(p2.bob)", which means that "player 1 knows that the avatar of player 2 is Bob". There are four characters in this game (of which only three are currently shown) named {"Fred", "Li'l Timmy", "Bob", "Peter"}. A legend as to which character belongs to whom will be posted in the near future. If, at any point, the knowledge base contains a contradiction, the system will notify us of this in the console. It is expected that the final version will never contain contradictions since both players are perfect logical reasoners and perfectly truthful, but it does show that currently there is still a small bug in the prover that accidentally adds contradicting knowledge. To see this, try refreshing the page a few times with the console open. Finally, the question "crosseyed:false" seems to always be answered as "!pn.crosseyed:false". Whoops...
  </p>

</body>
</html>
